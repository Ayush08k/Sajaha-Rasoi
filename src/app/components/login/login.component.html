<div class="login-container">
  <div class="login-content">
    <!-- App Branding -->
    <div class="app-branding">
      <img src="assets/Icon/logo.png" alt="Saajha Rasoi Logo" class="app-logo"/>
      <h1 class="app-title">Saajha Rasoi</h1>
      <p class="app-subtitle">Share surplus, reduce waste, build community</p>
    </div>

    <!-- Phone Number Input (Initial State) -->
    @if (!showOtpInput()) {
      <div class="login-form">
        <div class="form-group">
          <label for="phoneNumber" class="form-label">Phone Number</label>
          <div class="phone-input-wrapper">
            <span class="country-code">+91</span>
            <input
              id="phoneNumber"
              type="tel"
              class="phone-input"
              placeholder="Enter 10-digit number"
              maxlength="10"
<<<<<<< HEAD
  [value]="phoneNumber()"
            (input)="onPhoneNumberChange($event)"
            [disabled]="isLoading()"
=======
              [(ngModel)]="phoneNumber"
              [disabled]="isLoading()"
>>>>>>> ff3a45c164d25325c387c30b2402b81dbad2e8aa
            />
          </div>
        </div>

        <button 
          class="get-otp-button"
          [class.loading]="isLoading()"
          [class.disabled]="phoneNumber().length !== 10"
          [disabled]="phoneNumber().length !== 10 || isLoading()"
          (click)="onGetOTP()"
        >
          @if (isLoading()) {
            <div class="loading-spinner"></div>
            <span>Sending OTP...</span>
          } @else {
            <span>Get OTP</span>
          }
        </button>

        <p class="verification-text">We'll send a verification code to your phone number</p>
      </div>

      <div id="recaptcha-container"></div>

        <!-- Display general errors here -->
        @if (generalError()) {
          <div class="error-message general-error">
            <span class="material-symbols-outlined">error</span>
            {{ generalError() }}
          </div>
        }
    }

    <!-- OTP Input (After phone number is submitted) -->
    @if (showOtpInput()) {
      <div class="otp-form">
        <div class="form-header">
          <button class="back-button" (click)="onBackToPhone()">
            <img src="assets/Icon/back-arrow.png" alt="">
          </button>
          <h2 class="form-title">Enter OTP</h2>
          <p class="form-description">
            We've sent a 6-digit code to<br>
            <strong>+91 {{ phoneNumber() }}</strong>
          </p>
        </div>

        <div class="form-group">
          <label for="otp" class="form-label">6-Digit OTP</label>
          <input
            id="otp"
            type="tel"
            class="otp-input"
            [class.error]="otpError()"
            placeholder="000000"
            maxlength="6"
<<<<<<< HEAD
[value]="otp()"
            (input)="onOtpChange($event)"
=======
            [(ngModel)]="otp"
>>>>>>> ff3a45c164d25325c387c30b2402b81dbad2e8aa
            [disabled]="isLoading()"
          />
          @if (otpError()) {
            <div class="error-message">
              <span class="material-symbols-outlined">error</span>
              {{ otpError() }}
            </div>
          }
        </div>

        <button 
          class="get-otp-button"
          [class.loading]="isLoading()"
          [class.disabled]="otp().length !== 6"
          [disabled]="otp().length !== 6 || isLoading()"
          (click)="onVerifyOTP()"
        >
          @if (isLoading()) {
            <div class="loading-spinner"></div>
            <span>Verifying...</span>
          } @else {
<<<<<<< HEAD
            <span>Verify OTP</span>
=======
            <span class="material-symbols-outlined">Verify OTP</span>
            
>>>>>>> ff3a45c164d25325c387c30b2402b81dbad2e8aa
          }
        </button>

        <div class="resend-section">
          @if (!canResend()) {
            <p class="resend-text">
              Didn't receive OTP? Resend in {{ countdown() }}s
            </p>
          } @else {
            <button class="resend-button" (click)="onResendOTP()">
<<<<<<< HEAD
              <span>Resend OTP</span>
=======
              <span class="material-symbols-outlined">Resend OTP</span>
              
>>>>>>> ff3a45c164d25325c387c30b2402b81dbad2e8aa
            </button>
          }
        </div>
      </div>
    }
  </div>
</div>
